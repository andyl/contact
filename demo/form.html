<html>

<head>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <style>
    form label {
      display: inline-block;
      width: 65px;
    }

    form input {
      width: 200px;
    }
  </style>
</head>

<body>

  <form id="form1">
    <input type="hidden" name="list" value="INB">
    <label for="msg">Inbox:</label>
    <input type="text" id="msg" name="msg">
    <button type="submit">Send</button>
  </form>

  <form target="_blank" action="http://dove:5001/submit" method="post">
    <input type="hidden" name="list" value="GRO">
    <label for="msg">Grocery:</label>
    <input type="text" id="msg" name="msg">
    <button onclick="redir()" type="submit">Send</button>
  </form>

  <form target="_blank" action="http://dove:5001/submit" method="post">
    <input type="hidden" name="list" value="ERR">
    <label for="msg">Errand:</label>
    <input type="text" id="msg" name="msg">
    <button onclick="redir()" type="submit">Send</button>
  </form>

  <script>
    const form = document.querySelector("#form1");

    async function sendData() {
      const formData = new FormData(form);
      const queryStr = new URLSearchParams(formData).toString(); 
      console.log("STARTING sendDATA"); 
      console.log(queryStr); 
      console.log("HEY"); 

      try {
        const response = await fetch("http://dove:5001/submit", {
          method: "POST",
          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
          body: queryStr,
        });
        console.log(await response.json());
      } catch (e) {
        console.error(e);
      }
    }

    form.addEventListener("submit", (event) => {
      event.preventDefault();
      sendData();
    });
  </script>

</body>

</html>
